<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-dropdown-input/paper-dropdown-input.html">
<link rel="import" href="../bower_components/iron-data-table/iron-data-table.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../components/application-header.html">


<dom-module id="admin-page-domaine">


    <template>
        <!-- Style here -->
        <style>
            
        </style>
		
	<body>

    <paper-dropdown-menu label="Priorite" noink no-animations >
  <paper-listbox attr-for-selected="name" class="dropdown-content" selected="All" id="Priorite">
    <paper-item name="All">All</paper-item>
    <paper-item name="Standard">Standard</paper-item>
    <paper-item name="Urgent">Urgent</paper-item>
    <paper-item name="Very Urgent">Very Urgent</paper-item>
  </paper-listbox>
</paper-dropdown-menu>

<paper-dropdown-menu label="Status" noink no-animations>
  <paper-listbox attr-for-selected="name" class="dropdown-content" selected="All" id="Status">
    <paper-item name="All">All</paper-item>
    <paper-item name="Open">Open</paper-item>
    <paper-item name="Closed">Closed</paper-item>
  </paper-listbox>
</paper-dropdown-menu>

<!-- APPLICATION DROPDOWN LISTBOX -->
<iron-ajax 
    method="POST"
    id="getElement"
    on-response="ajaxResult2"
    content-type="application/json"
    handle-as="json">
</iron-ajax>



<paper-dropdown-menu label="libellé court" items="" noink no-animations>
    <paper-listbox attr-for-selected="name" class="dropdown-content" selected="All" id="domaine">
        <paper-item name="All">All</paper-item>
        <template is=dom-repeat items="[[data]]">
            <paper-item name="[[item.LIB_COURT]]">[[item.LIB_COURT]]</paper-item>
        </template>
    </paper-listbox>
    </paper-dropdown-menu>

    <paper-dropdown-menu label="libellé long" items="" noink no-animations>
        <paper-listbox attr-for-selected="name" class="dropdown-content" selected="All" id="domaine2">
            <paper-item name="All">All</paper-item>
            <template is=dom-repeat items="[[data]]">
            <paper-item name="[[item.LIB_LONG]]">[[item.LIB_LONG]]</paper-item>
        </template>
        </paper-listbox>
    </paper-dropdown-menu>

    <paper-button raised id="button" on-click="f">Rechercher</paper-button>


    <!-- DATA TABLE -->
    <iron-data-table items="" id="tableTicket">
        <data-table-column name="Title">
            <template>[[item.ID]]</template>
        </data-table-column>
        <data-table-column name="PRIORITY">
            <template>[[item.PRIORITY]]</template>
        </data-table-column>
        <data-table-column name="REQUEST_STATUS">
            <template>[[item.REQUEST_STATUS]]</template>
        </data-table-column>
        <data-table-column name="APPLICATION">
            <template>[[item.APPLICATION]]</template>
        </data-table-column>
        <data-table-column name="Favoris">
            <template><paper-checkbox noink name="[[item.ID]]" checked="[[item.FAVORIS]]" on-change="switchFav"></paper-checkbox></template>
        </data-table-column>
    </iron-data-table>

    </body>
    </template>


    <script>
        Polymer({
            is: 'admin-page-domaine',
            properties: {
                text: {
                    value: ""
                },
                text2: {
                    value: ""
                },
                data: {
                    type: Array,
                    LIB_COURT: [],
                    LIB_LONG: []
                },
            },
            sendRequest: function(e) {
                var body = {
                    "table": "domaine",
                    "libcourt":1,
                    "liblong":1
                };
                this.$.getElement.url="/getData";
                this.$.getElement.body=body;
                this.$.getElement.generateRequest();
            },

            ajaxResult2: function(e) {
                console.log(e.detail.response);
                this.set("data", e.detail.response);
            },
            f: function(e) {
                var body = {
                    "Prio": this.querySelector("#Priorite").selected,
                    "Stat": this.querySelector("#Status").selected
                };
                this.set("text", "");
                this.$.request.url = "/request";
                this.$.request.body = body;
                this.$.request.generateRequest();
            },
            ajaxResult: function(e) {
                if (e.detail.response != null) {
                    var Object = e.detail.response;
                    this.set("ObjectData", Object);
                    document.getElementById("tableTicket").items = this.ObjectData;
                }

            }
        });
    </script>

</dom-module>